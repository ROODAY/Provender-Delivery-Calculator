function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function reset(){$("iron-pages").html('<div id="one" class="page"> <h3 class="header-text">Distribution Calculator</h3> <h6 class="header-text">Delivering with Provender allows you to connect to local buyers quickly and efficiently. We’ve built this distribution calculator to help you better control your bottom line and control your business profits.</h6> <div class="mdl-cell mdl-cell--12-col"> <form action="#" id="driving-stats-form" onsubmit="return false;"> <strong>Where are you coming from and where are you headed?</strong><br>More than two stops? Click the + to add more drops. <br><div id="driving-stats-inputs-container" class="mdl-cell mdl-cell--6-col"> <form-input options=\'{"label": "Home", "placeholder": "12 Example Street, Boston, MA", "type": "text"}\'></form-input> <form-input options=\'{"label": "Destination", "placeholder": "42 Example Road, Providence, RI", "type": "text"}\'></form-input> </div><div class="button-container"> <button id="remove-destination" onclick="removeDestination()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored hidden"> <i class="material-icons">close</i> </button> <div class="mdl-tooltip" for="remove-destination"> Remove a destination </div><button id="add-new-destination" onclick="appendDestination()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">add</i> </button> <div class="mdl-tooltip" for="add-new-destination"> Add another destination </div></div></form> </div></div><div id="two" class="page"> <h6 class="header-text">Many of our farmers deliver on days when they’re also in town for a market. If you’re planning on selling goods at market on the day of your delivery, use this step to add details around the hours of operation.</h6> <div class="mdl-cell mdl-cell--12-col"> <form action="#" id="time-not-farming"> <strong>You\'re doing more than driving. Break down today\'s todo list.</strong><br>If you have other tasks for the day, click the + to add them below.<br><div id="tasks-inputs-container" class="mdl-cell mdl-cell--6-col"> <form-input options=\'{"label": "Time-At-Market", "suffix": "hour(s)", "type": "number", "placeholder": "3"}\'></form-input> <form-input options=\'{"label": "Time-Unloading", "suffix": "hour(s)", "type": "number", "placeholder": "1"}\'></form-input> </div><div class="button-container"> <button id="remove-task" onclick="removeTask()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">close</i> </button> <div class="mdl-tooltip" for="remove-task"> Remove a task </div><button id="add-new-task" onclick="appendTask()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">add</i> </button> <div class="mdl-tooltip" for="add-new-task"> Add another task </div></div></form> </div></div><div id="three" class="page"> <h6 class="header-text">The most costly part of any delivery day is labour. Too many farmers never count their own time in a delivery day!</h6> <div class="mdl-cell mdl-cell--12-col"> <form action="#" id="labor-costs"> <strong>Who\'s putting in their time and what\'re they getting paid?</strong><br>If you have other folks in town for the day, click the + to add them below. <br><div id="labor-inputs-container" class="mdl-cell mdl-cell--6-col"> <form-input options=\'{"label": "Driver", "prefix": "$", "placeholder": "10.00", "suffix": "per hour", "type": "number"}\'></form-input> <form-input options=\'{"label": "Packer", "prefix": "$", "placeholder": "10.00", "suffix": "per hour", "type": "number"}\'></form-input> </div><div class="button-container"> <button id="remove-worker" onclick="removeWorker()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">close</i> </button> <div class="mdl-tooltip" for="remove-worker"> Remove a worker </div><button id="add-new-worker" onclick="appendWorker()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">add</i> </button> <div class="mdl-tooltip" for="add-new-worker"> Add another worker </div></div></form> </div></div><div id="four" class="page"> <div class="mdl-cell mdl-cell--12-col"> <form action="#" id="vehicle-costs"> <div id="vehicle-inputs-container"> <div class="mdl-cell mdl-cell--6-col inline-block"> <form-input options=\'{"label": "Loan-Amount", "prefix": "$", "placeholder": "30000", "type": "number"}\'></form-input> <form-input options=\'{"label": "Term-of-Loan-in-Years", "suffix": "years", "placeholder": "5", "type": "number"}\'></form-input> <form-input options=\'{"label": "Annual-Interest-Rate", "suffix": "%", "placeholder": "4.3", "type": "number"}\'></form-input> <form-input options=\'{"label": "Payments-per-Year", "placeholder": "12", "suffix": "payments", "type": "number"}\'></form-input> <form-input options=\'{"label": "Monthly-Insurance-Payment", "prefix": "$", "placeholder": "100.00", "type": "number"}\'></form-input> <form-input options=\'{"label": "Miles-per-Gallon", "suffix": "mpg", "placeholder": "17", "type": "number"}\'></form-input> <form-input options=\'{"label": "Gas-Price-per-Gallon", "prefix": "$", "placeholder": "2.22", "type": "number"}\'></form-input> </div><div class="mdl-cell mdl-cell--6-col inline-block"> <h6 class="header-text">Getting to the real cost of a truck on the road is important- there’s more than just gas involved. If you don’t want to get into the nitty-gritty details, just press “skip” and we’ll estimate for you.</h6> </div></div></form> </div></div><div id="five" class="page"> <h6 class="header-text">Finally, the most important details- what you are expecting to sell, your margin, and any additional expenses (delivery and parking fees).</h6> <div class="mdl-cell mdl-cell--12-col"> <form action="#" id="nitty-gritty"> Provender doesn\'t retain any of the info you add here.<br><div id="profits-inputs-container" class="mdl-cell mdl-cell--5-col inline-block"> <h5>Profits</h5> <form-input options=\'{"label": "Goods-Sold", "prefix": "$", "placeholder": "850.00", "type": "number"}\'></form-input> <form-input options=\'{"label": "Profit-Margin", "suffix": "%", "placeholder": "45", "type": "number"}\'></form-input> </div><div id="expenses-inputs-container" class="mdl-cell mdl-cell--5-col inline-block"> <h5>Expenses</h5> <form-input options=\'{"label": "Delivery-Fee", "prefix": "$", "placeholder": "5.00", "type": "number"}\'></form-input> <form-input options=\'{"label": "Parking-Fee", "prefix": "$", "placeholder": "5.00", "type": "number"}\'></form-input> </div><div class="button-container"> <button id="remove-expense" onclick="removeExpense()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">close</i> </button> <div class="mdl-tooltip" for="remove-expense"> Remove an expense </div><button id="add-new-expense" onclick="appendExpense()" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"> <i class="material-icons">add</i> </button> <div class="mdl-tooltip" for="add-new-expense"> Add another expense </div></div></form> </div></div><div id="six" class="page"> <h1 class="header-text">Results</h1> <div class="mdl-cell mdl-cell--12-col" id="results"> <div> <div class="mdl-cell mdl-cell--3-col"> <h6 class="text-right">Door to Door time will be</h6> </div><div class="mdl-cell mdl-cell--2-col auto-width"> <h3 class="text-center result-text" id="time-spent"></h3> </div><div class="mdl-cell mdl-cell--3-col"> <h6 class="text-left">hours.</h6> </div></div><div> <div class="mdl-cell mdl-cell--3-col"> <h6 class="text-right">You\'re driving</h6> </div><div class="mdl-cell mdl-cell--2-col auto-width"> <h3 class="text-center result-text" id="driving-stats"></h3> </div><div class="mdl-cell mdl-cell--3-col"> <h6 class="text-left"> miles. Road Warrior!</h6> </div></div><div> <div class="mdl-cell mdl-cell--3-col"> <h6 class="text-right">This trip will cost</h6> </div><div class="mdl-cell mdl-cell--2-col auto-width"> <h3 class="text-center result-text" id="costs"></h3> </div><div class="mdl-cell mdl-cell--3-col"> <h6 class="text-left">which is mostly labour <strong id="labourcost">(x)</strong> and fuel <strong id="fuelcost">(y)</strong>.</h6> </div></div><div> <div class="mdl-cell mdl-cell--3-col"> <h6 class="text-right">To make this trip work,</h6> </div><div class="mdl-cell mdl-cell--2-col auto-width"> <h3 class="text-center result-text" id="break-even"></h3> </div><div class="mdl-cell mdl-cell--3-col"> <h6 class="text-left">should be your minimum sale amount to break even.</h6> </div></div></div><div class="mdl-cell mdl-cell--12-col" id="google-charts-wrapper"> <google-chart type=\'pie\' options=\'{"title": "Breakdown of Distribution Costs"}\' id="cost-breakdown"> </google-chart> </div><div class="mdl-cell mdl-cell--12-col" id="google-map-wrapper"> <google-map id="google-map"></google-map> </div></div>'),pages=$("#pages-container").children()}function NPER(e,t,o){var n=0,i=0,r=t*(1+e*n)-i*e,a=o*e+t*(1+e*n);return Math.log(r/a)/Math.log(1+e)}function initMap(){function e(e,t){var o=document.getElementById(e);o.addEventListener("click",function(){i.setTypes(t)})}var t=new google.maps.Map(document.getElementById("map"),{center:{lat:-33.8688,lng:151.2195},zoom:13}),o=document.getElementById("pac-input"),n=document.getElementById("type-selector");t.controls[google.maps.ControlPosition.TOP_LEFT].push(o),t.controls[google.maps.ControlPosition.TOP_LEFT].push(n);var i=new google.maps.places.Autocomplete(o);i.bindTo("bounds",t);var r=new google.maps.InfoWindow,a=new google.maps.Marker({map:t,anchorPoint:new google.maps.Point(0,-29)});i.addListener("place_changed",function(){r.close(),a.setVisible(!1);var e=i.getPlace();if(!e.geometry)return void window.alert("Autocomplete's returned place contains no geometry");e.geometry.viewport?t.fitBounds(e.geometry.viewport):(t.setCenter(e.geometry.location),t.setZoom(17)),a.setIcon({url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}),a.setPosition(e.geometry.location),a.setVisible(!0);var o="";e.address_components&&(o=[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(" ")),r.setContent("<div><strong>"+e.name+"</strong><br>"+o),r.open(t,a)}),e("changetype-all",[]),e("changetype-address",["address"]),e("changetype-establishment",["establishment"]),e("changetype-geocode",["geocode"])}var directionsDisplay,directionsService,map,graph,pages,currentPage,$destinationfields,$emptydestinationFields,$taskfields,$emptytaskFields,$laborfields,$emptylaborFields,$loanfields,$emptyloanFields,$expensefields,$emptyexpenseFields;$(document).ready(function(){pages=$("#pages-container").children(),currentPage=0,graph=document.querySelector("google-chart"),map=document.querySelector("google-map"),map.latitude=37.77493,map.longitude=-122.41942,map.addEventListener("google-map-ready",function(e){directionsService=new google.maps.DirectionsService,directionsDisplay=new google.maps.DirectionsRenderer,setTimeout(function(){$("#loading").css("margin-top","-100vh")},300)}),$(".mdl-button").click(function(e){e.preventDefault()}),$("#skip").click(function(){if($destinationfields=$("#driving-stats-form input[id^='input']"),$expensefields=$("#nitty-gritty input[id^='input']"),$laborfields=$("#labor-costs input[id^='input']"),$taskfields=$("#time-not-farming input[id^='input']"),$loanfields=$("#vehicle-costs input[id^='input']"),1===currentPage)for(var e=0;e<$taskfields.length;e++)$($taskfields[e]).val(0);else if(2===currentPage)for(var e=0;e<$laborfields.length;e++)$($laborfields[e]).val(12);else if(3===currentPage)for(var e=0;e<$loanfields.length;e++)$($loanfields[e]).val($($loanfields[e]).attr("placeholder"));$(pages[currentPage]).removeClass("iron-selected"),currentPage+1<pages.length?0===currentPage?($emptydestinationFields=$destinationfields.filter(function(){return""===$.trim(this.value)}),$emptydestinationFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):1===currentPage?($emptytaskfields=$taskfields.filter(function(){return""===$.trim(this.value)}),$emptytaskfields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):2===currentPage?($emptylaborFields=$laborfields.filter(function(){return""===$.trim(this.value)}),$emptylaborFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):3===currentPage?($emptyloanFields=$loanfields.filter(function(){return""===$.trim(this.value)}),$emptyloanFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):4===currentPage?($emptyexpenseFields=$expensefields.filter(function(){return""===$.trim(this.value)}),$emptyexpenseFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):(currentPage+=1,$("#loading").css("margin-top","0"))):currentPage+=1:(currentPage=0,reset()),$(pages[currentPage]).addClass("iron-selected"),0===currentPage?$("#prevPage").css("display","none"):$("#prevPage").css("display","inline-block"),0===currentPage||4===currentPage||5===currentPage?$("#skip").css("display","none"):$("#skip").css("display","inline-block"),5===currentPage?(calcDrivingStats(),$("#nextPage>paper-material").html('Restart <iron-icon icon="chevron-right"></iron-icon>'),$("#nextPage>paper-material").css("background-color","#eeff41")):($("#nextPage>paper-material").html('Next <iron-icon icon="chevron-right"></iron-icon>'),$("#nextPage>paper-material").css("background-color","#fff"))}),$("#prevPage").click(function(){$(pages[currentPage]).removeClass("iron-selected"),currentPage-1>=0?currentPage-=1:currentPage=pages.length-1,$(pages[currentPage]).addClass("iron-selected"),0===currentPage?$("#prevPage").css("display","none"):$("#prevPage").css("display","inline-block"),0===currentPage||4===currentPage||5===currentPage?$("#skip").css("display","none"):$("#skip").css("display","inline-block"),5===currentPage?($("#nextPage>paper-material").html('Restart <iron-icon icon="chevron-right"></iron-icon>'),$("#nextPage>paper-material").css("background-color","#eeff41"),$("#nextPage").addClass("reset")):($("#nextPage>paper-material").html('Next <iron-icon icon="chevron-right"></iron-icon>'),$("#nextPage>paper-material").css("background-color","#fff"))}),$("#nextPage").click(function(){$destinationfields=$("#driving-stats-form input[id^='input']"),$expensefields=$("#nitty-gritty input[id^='input']"),$laborfields=$("#labor-costs input[id^='input']"),$taskfields=$("#time-not-farming input[id^='input']"),$loanfields=$("#vehicle-costs input[id^='input']"),$(pages[currentPage]).removeClass("iron-selected"),currentPage+1<pages.length?0===currentPage?($emptydestinationFields=$destinationfields.filter(function(){return""===$.trim(this.value)}),$emptydestinationFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):1===currentPage?($emptytaskfields=$taskfields.filter(function(){return""===$.trim(this.value)}),$emptytaskfields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):2===currentPage?($emptylaborFields=$laborfields.filter(function(){return""===$.trim(this.value)}),$emptylaborFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):3===currentPage?($emptyloanFields=$loanfields.filter(function(){return""===$.trim(this.value)}),$emptyloanFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):currentPage+=1):4===currentPage?($emptyexpenseFields=$expensefields.filter(function(){return""===$.trim(this.value)}),$emptyexpenseFields.length?($("#error-toast").attr("text","Uh-oh! Looks like you didn't fill out all the fields on this page!"),$("#error-toast>span.retry").addClass("hidden"),document.querySelector("#error-toast").show()):(currentPage+=1,$("#loading").css("margin-top","0"))):currentPage+=1:(currentPage=0,reset()),$(pages[currentPage]).addClass("iron-selected"),0===currentPage?$("#prevPage").css("display","none"):$("#prevPage").css("display","inline-block"),0===currentPage||4===currentPage||5===currentPage?$("#skip").css("display","none"):$("#skip").css("display","inline-block"),5===currentPage?(calcDrivingStats(),$("#nextPage>paper-material").html('Restart <iron-icon icon="chevron-right"></iron-icon>'),$("#nextPage>paper-material").css("background-color","#eeff41")):($("#nextPage>paper-material").html('Next <iron-icon icon="chevron-right"></iron-icon>'),$("#nextPage>paper-material").css("background-color","#fff"))})});var destinationCount=2,taskCount=3,workerCount=3,expenseCount=3;appendExpense=function(){$("#expenses-inputs-container").append('<form-input options=\'{"label": "Expense-'+expenseCount+'", "prefix": "$", "placeholder": "5.00", "type": "number"}\'></form-input>'),expenseCount+=1,expenseCount>2&&$("#remove-expense").removeClass("hidden"),$expensefields=$("#nitty-gritty input[id^='input']")},appendWorker=function(){$("#labor-inputs-container").append('<form-input options=\'{"label": "Worker-'+workerCount+'", "prefix": "$", "placeholder": "10.00", "suffix": "per hour", "type": "number"}\'></form-input>'),workerCount+=1,workerCount>2&&$("#remove-worker").removeClass("hidden"),$laborfields=$("#labor-costs input[id^='input']")},appendTask=function(){$("#tasks-inputs-container").append('<form-input options=\'{"label": "Task-'+taskCount+'", "suffix": "hour(s)", "type": "number", "placeholder": "2"}\'></form-input>'),taskCount+=1,taskCount>2&&$("#remove-task").removeClass("hidden"),$taskfields=$("#time-not-farming input[id^='input']")},appendDestination=function(){$("#driving-stats-inputs-container").append('<form-input options=\'{"label": "Destination-'+destinationCount+'", "placeholder": "Address", "type": "text"}\'></form-input>'),destinationCount+=1,destinationCount>2&&$("#remove-destination").removeClass("hidden"),$destinationfields=$("#driving-stats-form input[id^='input']")},removeDestination=function(){destinationCount>2&&($("#driving-stats-inputs-container form-input:last-child").remove(),destinationCount-=1,3>destinationCount&&$("#remove-destination").addClass("hidden"),$destinationfields=$("#driving-stats-form input[id^='input']"))},removeExpense=function(){expenseCount>2&&($("#expenses-inputs-container form-input:last-child").remove(),expenseCount-=1,3>expenseCount&&$("#remove-expense").addClass("hidden"),$expensefields=$("#nitty-gritty input[id^='input']"))},removeWorker=function(){workerCount>2&&($("#labor-inputs-container form-input:last-child").remove(),workerCount-=1,3>workerCount&&$("#remove-worker").addClass("hidden"),$laborfields=$("#labor-costs input[id^='input']"))},removeTask=function(){taskCount>2&&($("#tasks-inputs-container form-input:last-child").remove(),taskCount-=1,3>taskCount&&$("#remove-task").addClass("hidden"),$taskfields=$("#time-not-farming input[id^='input']"))},runCalculations=function(e){var t=[];t.push(e.routes[0].legs[0].distance),t.push(e.routes[0].legs[0].duration);var o={drivingStats:t,financialMetrics:calcDepreciation(),taskTime:calcTaskTime(),laborCost:calcLaborCosts(calcTaskTime()),fuelCost:Math.round(100*calcFuelCost(t[0].value/1609.34))/100,misc:calcMisc(calcDepreciation())};console.log(o);for(var n,i=!1,r=0;r<$laborfields.length;r++)"driver"===$laborfields[r].id.toLowerCase().replace("input-","")&&(i=!0,n=$laborfields[r]);i&&(o.driverCost=Math.round(o.drivingStats[1].value/60/60*parseInt($(n).val())*100)/100);var a=Math.round(10*(o.taskTime+o.drivingStats[1].value/60/60))/10,l=Math.round(100*(o.driverCost+o.laborCost+o.fuelCost+o.misc.totalExpenses))/100,s=Math.round(l/(parseInt($("#input-profit-margin").val())/100)*100)/100;$("#driving-stats").html(numberWithCommas(Math.round(o.drivingStats[0].value/1609.34)));Math.round(o.drivingStats[1].value/60/60/a*100);$("#time-spent").html(numberWithCommas(a)),$("#costs").html("$"+numberWithCommas(l)),$("#break-even").html("$"+numberWithCommas(s)),$("#labourcost").html("($"+numberWithCommas(o.laborCost)+")"),$("#fuelcost").html("($"+numberWithCommas(o.fuelCost)+")"),map=new google.maps.Map(document.getElementById("google-map")),directionsDisplay.setMap(map),directionsDisplay.setDirections(e),loadGraph(o),$("#loading").css("margin-top","-100vh")},loadGraph=function(e){data={cols:[{id:"",label:"Type",pattern:"",type:"string"},{id:"",label:"Cost",pattern:"",type:"number"}],rows:[]};var t=Math.round(e.financialMetrics.paymentPerPeriod/(365/parseInt($("#input-payments-per-year").val()))*100)/100,o=Math.round(parseInt($("#input-monthly-insurance-payment").val())/30*100)/100;data.rows.push({c:[{v:"Labor Cost",f:null},{v:e.laborCost,f:"$"+e.laborCost}]}),data.rows.push({c:[{v:"Fuel Cost",f:null},{v:e.fuelCost,f:"$"+e.fuelCost}]}),data.rows.push({c:[{v:"Depreciation",f:null},{v:t,f:"$"+t}]}),data.rows.push({c:[{v:"Insurance",f:null},{v:o,f:"$"+o}]}),console.log(data.rows);for(var n=$("#expenses-inputs-container").find("input"),i=$("#expenses-inputs-container").find("label"),r=0;r<n.length;r++){var a=parseInt($(n[r]).val());data.rows.push({c:[{v:$(i[r]).text(),f:null},{v:a,f:"$"+a}]})}$("#cost-breakdown").attr("data",JSON.stringify(data)),graph.drawChart()},calcMisc=function(e){for(var t=parseInt($("#input-goods-sold").val()),o=parseInt($("#input-profit-margin").val())/100,n=Math.round(t*o*100)/100,i=parseInt($("#input-payments-per-year").val()),r=$("#expenses-inputs-container").find("input"),a=0,l=0;l<r.length;l++)a+=parseInt($(r[l]).val());return a+=e.paymentPerPeriod/(365/i),a+=parseInt($("#input-monthly-insurance-payment").val())/30,a=Math.round(100*a)/100,{totalExpenses:a,margin:n}},calcFuelCost=function(e){console.log("miles: "+e);var t=parseInt($("#input-miles-per-gallon").val()),o=parseInt($("#input-gas-price-per-gallon").val());return console.log("mpg: "+t+", price: "+o),e/t*o},calcDepreciation=function(){var e=parseInt($("#input-loan-amount").val()),t=parseInt($("#input-term-of-loan-in-years").val()),o=parseInt($("#input-annual-interest-rate").val()),n=parseInt($("#input-payments-per-year").val()),i=Math.round(1e4*(1+o/100/n-1))/1e4,r=Math.round(i*e/(1-Math.pow(1+i,-1*n*t))*100)/100,a=Math.round(NPER(i,r,-1*e)),l=Math.round(r*a*100)/100,s=Math.round(100*(l-e))/100;return{ratePerPeriod:i,paymentPerPeriod:r,numPayments:a,totalPayment:l,totalInterest:s}},calcTaskTime=function(){for(var e=$("#tasks-inputs-container").find("input"),t=0,o=0;o<e.length;o++)t+=parseInt($(e[o]).val());return t},calcLaborCosts=function(e){for(var t=$("#labor-inputs-container").find("input"),o=0,n=0;n<t.length;n++)o+=parseInt($(t[n]).val())*e;return o},calcDrivingStats=function(){$("#loading").css("margin-top","0");for(var e=$("#driving-stats-inputs-container").find("input"),t=[],o=1;o<e.length;o++)input=e[o],point={location:$(input).val(),stopover:!1},t.push(point);var n={origin:$(e[0]).val(),destination:$(e[0]).val(),waypoints:t,provideRouteAlternatives:!1,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL};directionsService.route(n,function(e,t){t==google.maps.DirectionsStatus.OK?runCalculations(e):($("#loading").css("margin-top","-100vh"),$("#error-toast").attr("text","Failed to get directions! Status: "+t),$("#error-toast>span.retry").removeClass("hidden"),console.error("Google Maps API Status: "+t),document.querySelector("#error-toast").show())})};